!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.Stimulus={})}(this,function(e){"use strict";var r=function(){function e(e,t){this.eventTarget=e,this.eventName=t,this.unorderedBindings=new Set}return e.prototype.connect=function(){this.eventTarget.addEventListener(this.eventName,this,!1)},e.prototype.disconnect=function(){this.eventTarget.removeEventListener(this.eventName,this,!1)},e.prototype.bindingConnected=function(e){this.unorderedBindings.add(e)},e.prototype.bindingDisconnected=function(e){this.unorderedBindings.delete(e)},e.prototype.handleEvent=function(e){for(var t=function(e){{if("immediatePropagationStopped"in e)return e;var t=e.stopImmediatePropagation;return Object.assign(e,{immediatePropagationStopped:!1,stopImmediatePropagation:function(){this.immediatePropagationStopped=!0,t.call(this)}})}}(e),n=0,r=this.bindings;n<r.length;n++){var o=r[n];if(t.immediatePropagationStopped)break;o.handleEvent(t)}},Object.defineProperty(e.prototype,"bindings",{get:function(){return Array.from(this.unorderedBindings).sort(function(e,t){var n=e.index,r=t.index;return n<r?-1:r<n?1:0})},enumerable:!0,configurable:!0}),e}();var n=function(){function e(e){this.application=e,this.eventListenerMaps=new Map,this.started=!1}return e.prototype.start=function(){this.started||(this.started=!0,this.eventListeners.forEach(function(e){return e.connect()}))},e.prototype.stop=function(){this.started&&(this.started=!1,this.eventListeners.forEach(function(e){return e.disconnect()}))},Object.defineProperty(e.prototype,"eventListeners",{get:function(){return Array.from(this.eventListenerMaps.values()).reduce(function(e,t){return e.concat(Array.from(t.values()))},[])},enumerable:!0,configurable:!0}),e.prototype.bindingConnected=function(e){this.fetchEventListenerForBinding(e).bindingConnected(e)},e.prototype.bindingDisconnected=function(e){this.fetchEventListenerForBinding(e).bindingDisconnected(e)},e.prototype.handleError=function(e,t,n){void 0===n&&(n={}),this.application.handleError(e,"Error "+t,n)},e.prototype.fetchEventListenerForBinding=function(e){var t=e.eventTarget,n=e.eventName;return this.fetchEventListener(t,n)},e.prototype.fetchEventListener=function(e,t){var n=this.fetchEventListenerMapForEventTarget(e),r=n.get(t);return r||(r=this.createEventListener(e,t),n.set(t,r)),r},e.prototype.createEventListener=function(e,t){var n=new r(e,t);return this.started&&n.connect(),n},e.prototype.fetchEventListenerMapForEventTarget=function(e){var t=this.eventListenerMaps.get(e);return t||(t=new Map,this.eventListenerMaps.set(e,t)),t},e}(),o=/^((.+?)(@(window|document))?->)?(.+?)(#(.+))?$/;function t(e){var t=e.trim().match(o)||[];return{eventTarget:function(e){{if("window"==e)return window;if("document"==e)return document}}(t[4]),eventName:t[2],identifier:t[5],methodName:t[7]}}var i=function(){function e(e,t,n){this.element=e,this.index=t,this.eventTarget=n.eventTarget||e,this.eventName=n.eventName||function(e){var t=e.tagName.toLowerCase();if(t in s)return s[t](e)}(e)||a("missing event name"),this.identifier=n.identifier||a("missing identifier"),this.methodName=n.methodName||a("missing method name")}return e.forToken=function(e){return new this(e.element,e.index,t(e.content))},e.prototype.toString=function(){var e=this.eventTargetName?"@"+this.eventTargetName:"";return""+this.eventName+e+"->"+this.identifier+"#"+this.methodName},Object.defineProperty(e.prototype,"eventTargetName",{get:function(){return(e=this.eventTarget)==window?"window":e==document?"document":void 0;var e},enumerable:!0,configurable:!0}),e}(),s={a:function(e){return"click"},button:function(e){return"click"},form:function(e){return"submit"},input:function(e){return"submit"==e.getAttribute("type")?"click":"change"},select:function(e){return"change"},textarea:function(e){return"change"}};function a(e){throw new Error(e)}var c=function(){function e(e,t){this.context=e,this.action=t}return Object.defineProperty(e.prototype,"index",{get:function(){return this.action.index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eventTarget",{get:function(){return this.action.eventTarget},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.context.identifier},enumerable:!0,configurable:!0}),e.prototype.handleEvent=function(e){this.willBeInvokedByEvent(e)&&this.invokeWithEvent(e)},Object.defineProperty(e.prototype,"eventName",{get:function(){return this.action.eventName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"method",{get:function(){var e=this.controller[this.methodName];if("function"==typeof e)return e;throw new Error('Action "'+this.action+'" references undefined method "'+this.methodName+'"')},enumerable:!0,configurable:!0}),e.prototype.invokeWithEvent=function(t){try{this.method.call(this.controller,t)}catch(e){var n=this,r={identifier:n.identifier,controller:n.controller,element:n.element,index:n.index,event:t};this.context.handleError(e,'invoking action "'+this.action+'"',r)}},e.prototype.willBeInvokedByEvent=function(e){var t=e.target;return this.element===t||(!(t instanceof Element&&this.element.contains(t))||this.scope.containsElement(t))},Object.defineProperty(e.prototype,"controller",{get:function(){return this.context.controller},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"methodName",{get:function(){return this.action.methodName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this.scope.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scope",{get:function(){return this.context.scope},enumerable:!0,configurable:!0}),e}(),u=function(){function e(e,t){var n=this;this.element=e,this.started=!1,this.delegate=t,this.elements=new Set,this.mutationObserver=new MutationObserver(function(e){return n.processMutations(e)})}return e.prototype.start=function(){this.started||(this.started=!0,this.mutationObserver.observe(this.element,{attributes:!0,childList:!0,subtree:!0}),this.refresh())},e.prototype.stop=function(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)},e.prototype.refresh=function(){if(this.started){for(var e=new Set(this.matchElementsInTree()),t=0,n=Array.from(this.elements);t<n.length;t++){var r=n[t];e.has(r)||this.removeElement(r)}for(var o=0,i=Array.from(e);o<i.length;o++){r=i[o];this.addElement(r)}}},e.prototype.processMutations=function(e){if(this.started)for(var t=0,n=e;t<n.length;t++){var r=n[t];this.processMutation(r)}},e.prototype.processMutation=function(e){"attributes"==e.type?this.processAttributeChange(e.target,e.attributeName):"childList"==e.type&&(this.processRemovedNodes(e.removedNodes),this.processAddedNodes(e.addedNodes))},e.prototype.processAttributeChange=function(e,t){var n=e;this.elements.has(n)?this.delegate.elementAttributeChanged&&this.matchElement(n)?this.delegate.elementAttributeChanged(n,t):this.removeElement(n):this.matchElement(n)&&this.addElement(n)},e.prototype.processRemovedNodes=function(e){for(var t=0,n=Array.from(e);t<n.length;t++){var r=n[t],o=this.elementFromNode(r);o&&this.processTree(o,this.removeElement)}},e.prototype.processAddedNodes=function(e){for(var t=0,n=Array.from(e);t<n.length;t++){var r=n[t],o=this.elementFromNode(r);o&&this.elementIsActive(o)&&this.processTree(o,this.addElement)}},e.prototype.matchElement=function(e){return this.delegate.matchElement(e)},e.prototype.matchElementsInTree=function(e){return void 0===e&&(e=this.element),this.delegate.matchElementsInTree(e)},e.prototype.processTree=function(e,t){for(var n=0,r=this.matchElementsInTree(e);n<r.length;n++){var o=r[n];t.call(this,o)}},e.prototype.elementFromNode=function(e){if(e.nodeType==Node.ELEMENT_NODE)return e},e.prototype.elementIsActive=function(e){return e.isConnected==this.element.isConnected&&this.element.contains(e)},e.prototype.addElement=function(e){this.elements.has(e)||this.elementIsActive(e)&&(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))},e.prototype.removeElement=function(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))},e}(),p=function(){function e(e,t,n){this.attributeName=t,this.delegate=n,this.elementObserver=new u(e,this)}return Object.defineProperty(e.prototype,"element",{get:function(){return this.elementObserver.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selector",{get:function(){return"["+this.attributeName+"]"},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.elementObserver.start()},e.prototype.stop=function(){this.elementObserver.stop()},e.prototype.refresh=function(){this.elementObserver.refresh()},Object.defineProperty(e.prototype,"started",{get:function(){return this.elementObserver.started},enumerable:!0,configurable:!0}),e.prototype.matchElement=function(e){return e.hasAttribute(this.attributeName)},e.prototype.matchElementsInTree=function(e){var t=this.matchElement(e)?[e]:[],n=Array.from(e.querySelectorAll(this.selector));return t.concat(n)},e.prototype.elementMatched=function(e){this.delegate.elementMatchedAttribute&&this.delegate.elementMatchedAttribute(e,this.attributeName)},e.prototype.elementUnmatched=function(e){this.delegate.elementUnmatchedAttribute&&this.delegate.elementUnmatchedAttribute(e,this.attributeName)},e.prototype.elementAttributeChanged=function(e,t){this.delegate.elementAttributeValueChanged&&this.attributeName==t&&this.delegate.elementAttributeValueChanged(e,t)},e}();function l(e,t,n){d(e,t).add(n)}function f(e,t,n){var r,o,i;d(e,t).delete(n),o=t,null!=(i=(r=e).get(o))&&0==i.size&&r.delete(o)}function d(e,t){var n=e.get(t);return n||(n=new Set,e.set(t,n)),n}var h,m=function(){function e(){this.valuesByKey=new Map}return Object.defineProperty(e.prototype,"values",{get:function(){return Array.from(this.valuesByKey.values()).reduce(function(e,t){return e.concat(Array.from(t))},[])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return Array.from(this.valuesByKey.values()).reduce(function(e,t){return e+t.size},0)},enumerable:!0,configurable:!0}),e.prototype.add=function(e,t){l(this.valuesByKey,e,t)},e.prototype.delete=function(e,t){f(this.valuesByKey,e,t)},e.prototype.has=function(e,t){var n=this.valuesByKey.get(e);return null!=n&&n.has(t)},e.prototype.hasKey=function(e){return this.valuesByKey.has(e)},e.prototype.hasValue=function(t){return Array.from(this.valuesByKey.values()).some(function(e){return e.has(t)})},e.prototype.getValuesForKey=function(e){var t=this.valuesByKey.get(e);return t?Array.from(t):[]},e.prototype.getKeysForValue=function(t){return Array.from(this.valuesByKey).filter(function(e){e[0];return e[1].has(t)}).map(function(e){var t=e[0];e[1];return t})},e}(),y=(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),b=(function(n){function e(){var e=n.call(this)||this;return e.keysByValue=new Map,e}y(e,n),Object.defineProperty(e.prototype,"values",{get:function(){return Array.from(this.keysByValue.keys())},enumerable:!0,configurable:!0}),e.prototype.add=function(e,t){n.prototype.add.call(this,e,t),l(this.keysByValue,t,e)},e.prototype.delete=function(e,t){n.prototype.delete.call(this,e,t),f(this.keysByValue,t,e)},e.prototype.hasValue=function(e){return this.keysByValue.has(e)},e.prototype.getKeysForValue=function(e){var t=this.keysByValue.get(e);return t?Array.from(t):[]}}(m),function(){function e(e,t,n){this.attributeObserver=new p(e,t,this),this.delegate=n,this.tokensByElement=new m}return Object.defineProperty(e.prototype,"started",{get:function(){return this.attributeObserver.started},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.attributeObserver.start()},e.prototype.stop=function(){this.attributeObserver.stop()},e.prototype.refresh=function(){this.attributeObserver.refresh()},Object.defineProperty(e.prototype,"element",{get:function(){return this.attributeObserver.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attributeName",{get:function(){return this.attributeObserver.attributeName},enumerable:!0,configurable:!0}),e.prototype.elementMatchedAttribute=function(e){this.tokensMatched(this.readTokensForElement(e))},e.prototype.elementAttributeValueChanged=function(e){var t=this.refreshTokensForElement(e),n=t[0],r=t[1];this.tokensUnmatched(n),this.tokensMatched(r)},e.prototype.elementUnmatchedAttribute=function(e){this.tokensUnmatched(this.tokensByElement.getValuesForKey(e))},e.prototype.tokensMatched=function(e){var t=this;e.forEach(function(e){return t.tokenMatched(e)})},e.prototype.tokensUnmatched=function(e){var t=this;e.forEach(function(e){return t.tokenUnmatched(e)})},e.prototype.tokenMatched=function(e){this.delegate.tokenMatched(e),this.tokensByElement.add(e.element,e)},e.prototype.tokenUnmatched=function(e){this.delegate.tokenUnmatched(e),this.tokensByElement.delete(e.element,e)},e.prototype.refreshTokensForElement=function(e){var n,r,t,o=this.tokensByElement.getValuesForKey(e),i=this.readTokensForElement(e),s=(n=o,r=i,t=Math.max(n.length,r.length),Array.from({length:t},function(e,t){return[n[t],r[t]]})).findIndex(function(e){var t,n,r=e[0],o=e[1];return n=o,!((t=r)&&n&&t.index==n.index&&t.content==n.content)});return-1==s?[[],[]]:[o.slice(s),i.slice(s)]},e.prototype.readTokensForElement=function(e){var n,r,t=this.attributeName,o=e.getAttribute(t)||"";return n=e,r=t,o.trim().split(/\s+/).filter(function(e){return e.length}).map(function(e,t){return{element:n,attributeName:r,content:e,index:t}})},e}());var v,g=function(){function e(e,t,n){this.tokenListObserver=new b(e,t,this),this.delegate=n,this.parseResultsByToken=new WeakMap,this.valuesByTokenByElement=new WeakMap}return Object.defineProperty(e.prototype,"started",{get:function(){return this.tokenListObserver.started},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.tokenListObserver.start()},e.prototype.stop=function(){this.tokenListObserver.stop()},e.prototype.refresh=function(){this.tokenListObserver.refresh()},Object.defineProperty(e.prototype,"element",{get:function(){return this.tokenListObserver.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"attributeName",{get:function(){return this.tokenListObserver.attributeName},enumerable:!0,configurable:!0}),e.prototype.tokenMatched=function(e){var t=e.element,n=this.fetchParseResultForToken(e).value;n&&(this.fetchValuesByTokenForElement(t).set(e,n),this.delegate.elementMatchedValue(t,n))},e.prototype.tokenUnmatched=function(e){var t=e.element,n=this.fetchParseResultForToken(e).value;n&&(this.fetchValuesByTokenForElement(t).delete(e),this.delegate.elementUnmatchedValue(t,n))},e.prototype.fetchParseResultForToken=function(e){var t=this.parseResultsByToken.get(e);return t||(t=this.parseToken(e),this.parseResultsByToken.set(e,t)),t},e.prototype.fetchValuesByTokenForElement=function(e){var t=this.valuesByTokenByElement.get(e);return t||(t=new Map,this.valuesByTokenByElement.set(e,t)),t},e.prototype.parseToken=function(e){try{return{value:this.delegate.parseValueForToken(e)}}catch(e){return{error:e}}},e}(),E=function(){function e(e,t){this.context=e,this.delegate=t,this.bindingsByAction=new Map}return e.prototype.start=function(){this.valueListObserver||(this.valueListObserver=new g(this.element,this.actionAttribute,this),this.valueListObserver.start())},e.prototype.stop=function(){this.valueListObserver&&(this.valueListObserver.stop(),delete this.valueListObserver,this.disconnectAllActions())},Object.defineProperty(e.prototype,"element",{get:function(){return this.context.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.context.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actionAttribute",{get:function(){return this.schema.actionAttribute},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return this.context.schema},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bindings",{get:function(){return Array.from(this.bindingsByAction.values())},enumerable:!0,configurable:!0}),e.prototype.connectAction=function(e){var t=new c(this.context,e);this.bindingsByAction.set(e,t),this.delegate.bindingConnected(t)},e.prototype.disconnectAction=function(e){var t=this.bindingsByAction.get(e);t&&(this.bindingsByAction.delete(e),this.delegate.bindingDisconnected(t))},e.prototype.disconnectAllActions=function(){var t=this;this.bindings.forEach(function(e){return t.delegate.bindingDisconnected(e)}),this.bindingsByAction.clear()},e.prototype.parseValueForToken=function(e){var t=i.forToken(e);if(t.identifier==this.identifier)return t},e.prototype.elementMatchedValue=function(e,t){this.connectAction(t)},e.prototype.elementUnmatchedValue=function(e,t){this.disconnectAction(t)},e}(),O=function(){function e(e,t){this.module=e,this.scope=t,this.controller=new e.controllerConstructor(this),this.bindingObserver=new E(this,this.dispatcher);try{this.controller.initialize()}catch(e){this.handleError(e,"initializing controller")}}return e.prototype.connect=function(){this.bindingObserver.start();try{this.controller.connect()}catch(e){this.handleError(e,"connecting controller")}},e.prototype.disconnect=function(){try{this.controller.disconnect()}catch(e){this.handleError(e,"disconnecting controller")}this.bindingObserver.stop()},Object.defineProperty(e.prototype,"application",{get:function(){return this.module.application},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.module.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return this.application.schema},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dispatcher",{get:function(){return this.application.dispatcher},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this.scope.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentElement",{get:function(){return this.element.parentElement},enumerable:!0,configurable:!0}),e.prototype.handleError=function(e,t,n){void 0===n&&(n={});var r=this.identifier,o=this.controller,i=this.element;n=Object.assign({identifier:r,controller:o,element:i},n),this.application.handleError(e,"Error "+t,n)},e}(),w=(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}v(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});function x(e){return{identifier:e.identifier,controllerConstructor:(t=e.controllerConstructor,n=A(t),n.bless(),n)};var t,n}var A=function(){function e(t){function n(){var e=this&&this instanceof n?this.constructor:void 0;return Reflect.construct(t,arguments,e)}return n.prototype=Object.create(t.prototype,{constructor:{value:n}}),Reflect.setPrototypeOf(n,t),n}try{return(t=e(function(){this.a.call(this)})).prototype.a=function(){},new t,e}catch(e){return function(e){return function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return w(t,e),t}(e)}}var t}(),k=function(){function e(e,t){this.application=e,this.definition=x(t),this.contextsByScope=new WeakMap,this.connectedContexts=new Set}return Object.defineProperty(e.prototype,"identifier",{get:function(){return this.definition.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controllerConstructor",{get:function(){return this.definition.controllerConstructor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contexts",{get:function(){return Array.from(this.connectedContexts)},enumerable:!0,configurable:!0}),e.prototype.connectContextForScope=function(e){var t=this.fetchContextForScope(e);this.connectedContexts.add(t),t.connect()},e.prototype.disconnectContextForScope=function(e){var t=this.contextsByScope.get(e);t&&(this.connectedContexts.delete(t),t.disconnect())},e.prototype.fetchContextForScope=function(e){var t=this.contextsByScope.get(e);return t||(t=new O(this,e),this.contextsByScope.set(e,t)),t},e}(),P=function(){function e(e){this.scope=e}return Object.defineProperty(e.prototype,"element",{get:function(){return this.scope.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.scope.identifier},enumerable:!0,configurable:!0}),e.prototype.get=function(e){return e=this.getFormattedKey(e),this.element.getAttribute(e)},e.prototype.set=function(e,t){return e=this.getFormattedKey(e),this.element.setAttribute(e,t),this.get(e)},e.prototype.has=function(e){return e=this.getFormattedKey(e),this.element.hasAttribute(e)},e.prototype.delete=function(e){return!!this.has(e)&&(e=this.getFormattedKey(e),this.element.removeAttribute(e),!0)},e.prototype.getFormattedKey=function(e){return"data-"+this.identifier+"-"+e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()})},e}();function j(e,t){return"["+e+'~="'+t+'"]'}var _=function(){function e(e){this.scope=e}return Object.defineProperty(e.prototype,"element",{get:function(){return this.scope.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.scope.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return this.scope.schema},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return null!=this.find(e)},e.prototype.find=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.getSelectorForTargetNames(e);return this.scope.findElement(n)},e.prototype.findAll=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.getSelectorForTargetNames(e);return this.scope.findAllElements(n)},e.prototype.getSelectorForTargetNames=function(e){var t=this;return e.map(function(e){return t.getSelectorForTargetName(e)}).join(", ")},e.prototype.getSelectorForTargetName=function(e){var t=this.identifier+"."+e;return j(this.schema.targetAttribute,t)},e}(),C=function(){function e(e,t,n){this.schema=e,this.identifier=t,this.element=n,this.targets=new _(this),this.data=new P(this)}return e.prototype.findElement=function(e){return this.findAllElements(e)[0]},e.prototype.findAllElements=function(e){var t=this.element.matches(e)?[this.element]:[],n=this.filterElements(Array.from(this.element.querySelectorAll(e)));return t.concat(n)},e.prototype.filterElements=function(e){var t=this;return e.filter(function(e){return t.containsElement(e)})},e.prototype.containsElement=function(e){return e.closest(this.controllerSelector)===this.element},Object.defineProperty(e.prototype,"controllerSelector",{get:function(){return j(this.schema.controllerAttribute,this.identifier)},enumerable:!0,configurable:!0}),e}(),S=function(){function e(e,t,n){this.element=e,this.schema=t,this.delegate=n,this.valueListObserver=new g(this.element,this.controllerAttribute,this),this.scopesByIdentifierByElement=new WeakMap,this.scopeReferenceCounts=new WeakMap}return e.prototype.start=function(){this.valueListObserver.start()},e.prototype.stop=function(){this.valueListObserver.stop()},Object.defineProperty(e.prototype,"controllerAttribute",{get:function(){return this.schema.controllerAttribute},enumerable:!0,configurable:!0}),e.prototype.parseValueForToken=function(e){var t=e.element,n=e.content,r=this.fetchScopesByIdentifierForElement(t),o=r.get(n);return o||(o=new C(this.schema,n,t),r.set(n,o)),o},e.prototype.elementMatchedValue=function(e,t){var n=(this.scopeReferenceCounts.get(t)||0)+1;this.scopeReferenceCounts.set(t,n),1==n&&this.delegate.scopeConnected(t)},e.prototype.elementUnmatchedValue=function(e,t){var n=this.scopeReferenceCounts.get(t);n&&(this.scopeReferenceCounts.set(t,n-1),1==n&&this.delegate.scopeDisconnected(t))},e.prototype.fetchScopesByIdentifierForElement=function(e){var t=this.scopesByIdentifierByElement.get(e);return t||(t=new Map,this.scopesByIdentifierByElement.set(e,t)),t},e}(),B=function(){function e(e){this.application=e,this.scopeObserver=new S(this.element,this.schema,this),this.scopesByIdentifier=new m,this.modulesByIdentifier=new Map}return Object.defineProperty(e.prototype,"element",{get:function(){return this.application.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return this.application.schema},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"controllerAttribute",{get:function(){return this.schema.controllerAttribute},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modules",{get:function(){return Array.from(this.modulesByIdentifier.values())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contexts",{get:function(){return this.modules.reduce(function(e,t){return e.concat(t.contexts)},[])},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.scopeObserver.start()},e.prototype.stop=function(){this.scopeObserver.stop()},e.prototype.loadDefinition=function(e){this.unloadIdentifier(e.identifier);var t=new k(this.application,e);this.connectModule(t)},e.prototype.unloadIdentifier=function(e){var t=this.modulesByIdentifier.get(e);t&&this.disconnectModule(t)},e.prototype.getContextForElementAndIdentifier=function(t,e){var n=this.modulesByIdentifier.get(e);if(n)return n.contexts.find(function(e){return e.element==t})},e.prototype.handleError=function(e,t,n){this.application.handleError(e,t,n)},e.prototype.scopeConnected=function(e){this.scopesByIdentifier.add(e.identifier,e);var t=this.modulesByIdentifier.get(e.identifier);t&&t.connectContextForScope(e)},e.prototype.scopeDisconnected=function(e){this.scopesByIdentifier.delete(e.identifier,e);var t=this.modulesByIdentifier.get(e.identifier);t&&t.disconnectContextForScope(e)},e.prototype.connectModule=function(t){this.modulesByIdentifier.set(t.identifier,t),this.scopesByIdentifier.getValuesForKey(t.identifier).forEach(function(e){return t.connectContextForScope(e)})},e.prototype.disconnectModule=function(t){this.modulesByIdentifier.delete(t.identifier),this.scopesByIdentifier.getValuesForKey(t.identifier).forEach(function(e){return t.disconnectContextForScope(e)})},e}(),M={controllerAttribute:"data-controller",actionAttribute:"data-action",targetAttribute:"data-target"},T=function(i,s,a,c){return new(a||(a=Promise))(function(e,t){function n(e){try{o(c.next(e))}catch(e){t(e)}}function r(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,r)}o((c=c.apply(i,s||[])).next())})},L=function(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=i[2&t[0]?"return":t[0]?"throw":"next"])&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[0,s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}},N=function(){function r(e,t){void 0===e&&(e=document.documentElement),void 0===t&&(t=M),this.element=e,this.schema=t,this.dispatcher=new n(this),this.router=new B(this)}return r.start=function(e,t){var n=new r(e,t);return n.start(),n},r.prototype.start=function(){return T(this,void 0,void 0,function(){return L(this,function(e){switch(e.label){case 0:return[4,new Promise(function(e){"loading"==document.readyState?document.addEventListener("DOMContentLoaded",e):e()})];case 1:return e.sent(),this.router.start(),this.dispatcher.start(),[2]}})})},r.prototype.stop=function(){this.router.stop(),this.dispatcher.stop()},r.prototype.register=function(e,t){this.load({identifier:e,controllerConstructor:t})},r.prototype.load=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];(Array.isArray(e)?e:[e].concat(n)).forEach(function(e){return t.router.loadDefinition(e)})},r.prototype.unload=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];(Array.isArray(e)?e:[e].concat(n)).forEach(function(e){return t.router.unloadIdentifier(e)})},Object.defineProperty(r.prototype,"controllers",{get:function(){return this.router.contexts.map(function(e){return e.controller})},enumerable:!0,configurable:!0}),r.prototype.getControllerForElementAndIdentifier=function(e,t){var n=this.router.getContextForElementAndIdentifier(e,t);return n?n.controller:null},r.prototype.handleError=function(e,t,n){console.error("%s\n\n%o\n\n%o",t,e,n)},r}();function I(e){var t,i=e.prototype;(t=function(e){var t=[];for(;e;)t.push(e),e=Object.getPrototypeOf(e);return t}(e),Array.from(t.reduce(function(t,e){var n,r;return(n=e,r=n.targets,Array.isArray(r)?r:[]).forEach(function(e){return t.add(e)}),t},new Set))).forEach(function(t){var e,n,r,o;return n=i,(e={})[t+"Target"]={get:function(){var e=this.targets.find(t);if(e)return e;throw new Error('Missing target element "'+this.identifier+"."+t+'"')}},e[t+"Targets"]={get:function(){return this.targets.findAll(t)}},e["has"+(o=t,o.charAt(0).toUpperCase()+o.slice(1))+"Target"]={get:function(){return this.targets.has(t)}},r=e,void Object.keys(r).forEach(function(e){if(!(e in n)){var t=r[e];Object.defineProperty(n,e,t)}})})}var D=function(){function e(e){this.context=e}return e.bless=function(){I(this)},Object.defineProperty(e.prototype,"application",{get:function(){return this.context.application},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scope",{get:function(){return this.context.scope},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this.scope.element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"identifier",{get:function(){return this.scope.identifier},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"targets",{get:function(){return this.scope.targets},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.scope.data},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){},e.prototype.connect=function(){},e.prototype.disconnect=function(){},e.targets=[],e}();e.Application=N,e.Context=O,e.Controller=D,e.defaultSchema=M,Object.defineProperty(e,"__esModule",{value:!0})}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).Popper={})}(this,function(e){"use strict";function _(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left,x:t.left,y:t.top}}function x(e){if("[object Window]"!=={}.toString.call(e)){var t=e.ownerDocument;return t?t.defaultView:window}return e}function l(e){var t=x(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function C(e){return e instanceof x(e).Element}function f(e){return e instanceof x(e).HTMLElement}function d(e){return e?(e.nodeName||"").toLowerCase():null}function p(e){return x(e).getComputedStyle(e)}function n(e){return parseFloat(e)||0}function h(e){var t=f(e)?p(e):{};return{top:n(t.borderTopWidth),right:n(t.borderRightWidth),bottom:n(t.borderBottomWidth),left:n(t.borderLeftWidth)}}function m(e,t,n){void 0===n&&(n=!1);var r,o,i,s,a,c=_(e),u={scrollLeft:0,scrollTop:0},p={x:0,y:0};return n||("body"!==d(t)&&(u=(s=t)!==x(s)&&f(s)?{scrollLeft:(a=s).scrollLeft,scrollTop:a.scrollTop}:l(s)),f(t)&&(o=_(r=t),i=h(r),p={x:o.x+i.left,y:o.y+i.top})),{x:c.left+u.scrollLeft-p.x,y:c.top+u.scrollTop-p.y,width:c.width,height:c.height}}function Q(e){return{x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}}function s(e){return"html"===d(e)?e:e.parentNode||e.host||document.ownerDocument||document.documentElement}function y(e,t){void 0===t&&(t=[]);var n=function e(t){if(["html","body","#document"].includes(d(t)))return t.ownerDocument.body;if(f(t)){var n=p(t),r=n.overflow,o=n.overflowX,i=n.overflowY;if(/auto|scroll|overlay|hidden/.test(r+i+o))return t}return e(s(t))}(e),r="body"===d(n),o=r?x(n):n,i=t.concat(o);return r?i:i.concat(y(s(o)))}var r=function(){return void 0!==window.InstallTrigger};function o(e){var t;return!f(e)||!(t=e.offsetParent)||r()&&"fixed"===p(t).position?null:t}function A(e){for(var t=x(e),n=o(e);n&&["table","td","th"].includes(d(n));)n=o(n);return n&&"body"===d(n)&&"static"===p(n).position?t:n||t}var Z="top",$="bottom",ee="right",te="left",B="auto",M=[Z,$,ee,te],ne="start",b="end",S="clippingParents",T="viewport",L="popper",N="reference",I=M.reduce(function(e,t){return e.concat([t+"-"+ne,t+"-"+b])},[]),c=[].concat(M,[B]).reduce(function(e,t){return e.concat([t,t+"-"+ne,t+"-"+b])},[]),v=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function g(e){var r=new Map,o=new Set,t=[];return e.forEach(function(e){r.set(e.name,e)}),e.forEach(function(e){o.has(e.name)||function n(e){o.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach(function(e){if(!o.has(e)){var t=r.get(e);t&&n(t)}}),t.push(e)}(e)}),t}function E(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return[].concat(n).reduce(function(e,t){return e.replace(/%s/,t)},e)}var O='Popper: modifier "%s" provided an invalid %s property, expected %s but got %s',w='Popper: modifier "%s" requires "%s", but "%s" modifier is not available',k=["name","enabled","phase","fn","effect","requires","options"];function D(e,n){var r=new Set;return e.filter(function(e){var t=n(e);if(!r.has(t))return r.add(t),!0})}function re(e){return e.split("-")[0]}var P="Popper: Invalid reference or popper argument provided to Popper, they must be either a valid DOM element, virtual element, or a jQuery-wrapped DOM element.",i={placement:"bottom",modifiers:[],strategy:"absolute"};function j(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return!(e&&"function"==typeof e.getBoundingClientRect)})}function t(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,d=void 0===n?[]:n,r=t.defaultOptions,h=void 0===r?i:r;return function(s,a,t){void 0===t&&(t=h);var n,r,p={placement:"bottom",orderedModifiers:[],options:Object.assign({},i,{},h),modifiersData:{},elements:{reference:s,popper:a},attributes:{},styles:{}},c=[],l=!1,f={state:p,setOptions:function(e){u(),p.options=Object.assign({},h,{},p.options,{},e),p.scrollParents={reference:C(s)?y(s):[],popper:y(a)};var t,n,r,o=(t=[].concat(p.options.modifiers.filter(function(t){return!d.find(function(e){return e.name===t.name})}),d.map(function(t){return Object.assign({},t,{},p.options.modifiers.find(function(e){return e.name===t.name}))})),n=g(t),v.reduce(function(e,t){return e.concat(n.filter(function(e){return e.phase===t}))},[])),i=D([].concat(o,p.options.modifiers),function(e){return e.name});((r=i).forEach(function(n){Object.keys(n).forEach(function(e){switch(e){case"name":"string"!=typeof n.name&&console.error(E(O,String(n.name),'"name"','"string"','"'+String(n.name)+'"'));break;case"enabled":"boolean"!=typeof n.enabled&&console.error(E(O,n.name,'"enabled"','"boolean"','"'+String(n.enabled)+'"'));case"phase":v.includes(n.phase)||console.error(E(O,n.name,'"phase"',"either "+v.join(", "),'"'+String(n.phase)+'"'));break;case"fn":"function"!=typeof n.fn&&console.error(E(O,n.name,'"fn"','"function"','"'+String(n.fn)+'"'));break;case"effect":"function"!=typeof n.effect&&console.error(E(O,n.name,'"effect"','"function"','"'+String(n.fn)+'"'));break;case"requires":Array.isArray(n.requires)||console.error(E(O,n.name,'"requires"','"array"','"'+String(n.requires)+'"'));break;case"requiresIfExists":Array.isArray(n.requiresIfExists)||console.error(E(O,n.name,'"requiresIfExists"','"array"','"'+String(n.requiresIfExists)+'"'));break;case"options":case"data":break;default:console.error('PopperJS: an invalid property has been provided to the "'+n.name+'" modifier, valid properties are '+k.map(function(e){return'"'+e+'"'}).join(", ")+'; but "'+e+'" was provided.')}n.requires&&n.requires.forEach(function(t){null==r.find(function(e){return e.name===t})&&console.error(E(w,String(n.name),t,t))})})}),re(p.options.placement)===B)&&(o.find(function(e){return"flip"===e.name})||console.error(['Popper: "auto" placements require the "flip" modifier be',"present and enabled to work."].join(" ")));return p.orderedModifiers=o.filter(function(e){return e.enabled}),p.orderedModifiers.forEach(function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if("function"==typeof o){var i=o({state:p,name:t,instance:f,options:r});c.push(i||function(){})}}),f.update()},forceUpdate:function(){if(!l){var e=p.elements,t=e.reference,n=e.popper;if(j(t,n)){p.rects={reference:m(t,A(n),"fixed"===p.options.strategy),popper:Q(n)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(e){return p.modifiersData[e.name]=Object.assign({},e.data)});for(var r=0,o=0;o<p.orderedModifiers.length;o++){if(100<(r+=1)){console.error("Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.");break}if(!0!==p.reset){var i=p.orderedModifiers[o],s=i.fn,a=i.options,c=void 0===a?{}:a,u=i.name;"function"==typeof s&&(p=s({state:p,options:c,name:u,instance:f})||p)}else p.reset=!1,o=-1}}else console.error(P)}},update:(n=function(){return new Promise(function(e){f.forceUpdate(),e(p)})},function(){return r||(r=new Promise(function(e){Promise.resolve().then(function(){r=void 0,e(n())})})),r}),destroy:function(){u(),l=!0}};if(!j(s,a))return console.error(P),f;function u(){c.forEach(function(e){return e()}),c=[]}return f.setOptions(t).then(function(e){!l&&t.onFirstUpdate&&t.onFirstUpdate(e)}),f}}var F={passive:!0};function oe(e){return e.split("-")[1]}function ie(e){return["top","bottom"].includes(e)?"x":"y"}function V(e){var t,n=e.reference,r=e.element,o=e.placement,i=o?re(o):null,s=o?oe(o):null,a=n.x+n.width/2-r.width/2,c=n.y+n.height/2-r.height/2;switch(i){case Z:t={x:a,y:n.y-r.height};break;case $:t={x:a,y:n.y+n.height};break;case ee:t={x:n.x+n.width,y:c};break;case te:t={x:n.x-r.width,y:c};break;default:t={x:n.x,y:n.y}}var u=i?ie(i):null;if(null!=u){var p="y"===u?"height":"width";switch(s){case ne:t[u]=Math.floor(t[u])-Math.floor(n[p]/2-r[p]/2);break;case b:t[u]=Math.floor(t[u])+Math.ceil(n[p]/2-r[p]/2)}}return t}function H(e){return e.ownerDocument.documentElement}var R={top:"auto",right:"auto",bottom:"auto",left:"auto"};function u(e){var t,n,r,o,i,s=e.popper,a=e.popperRect,c=e.placement,u=e.offsets,p=e.position,l=e.gpuAcceleration,f=e.adaptive,d=(r=(n=u).x,o=n.y,i=window.devicePixelRatio||1,{x:Math.round(r*i)/i||0,y:Math.round(o*i)/i||0}),h=d.x,m=d.y,y=u.hasOwnProperty("x"),b=u.hasOwnProperty("y"),v=te,g=Z;if(f){var E=A(s);E===x(s)&&(E=H(s)),c===Z&&(m=m-E.clientHeight+a.height,g=$),c===te&&(h=h-E.clientWidth+a.width,v=ee)}var O,w=Object.assign({position:p},f&&R);return l?Object.assign({},w,((O={})[g]=b?"0":"",O[v]=y?"0":"",O.transform=(window.devicePixelRatio||1)<2?"translate("+h+"px, "+m+"px)":"translate3d("+h+"px, "+m+"px, 0)",O)):Object.assign({},w,((t={})[g]=b?m+"px":"",t[v]=y?h+"px":"",t.transform="",t))}var a={left:"right",right:"left",bottom:"top",top:"bottom"};function q(e){return e.replace(/left|right|bottom|top/g,function(e){return a[e]})}var U={start:"end",end:"start"};function W(e){return e.replace(/start|end/g,function(e){return U[e]})}function K(e,t){var n=Boolean(t.getRootNode&&t.getRootNode().host);if(e.contains(t))return!0;if(n){var r=t;do{if(r&&r.isSameNode(e))return!0;r=r.parentNode||r.host}while(r)}return!1}function z(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function G(e,t){return t===T?z({width:(s=x(e)).innerWidth,height:s.innerHeight,x:0,y:0}):f(t)?_(t):z((n=H(e),r=x(n),o=l(n),(i=m(H(n),r)).height=Math.max(i.height,r.innerHeight),i.width=Math.max(i.width,r.innerWidth),i.x=-o.scrollLeft,i.y=-o.scrollTop,i));var n,r,o,i,s}function X(s,e,t){var n,r,o,i="clippingParents"===e?(r=y(n=s),C(o=["absolute","fixed"].includes(p(n).position)&&f(n)?A(n):n)?r.filter(function(e){return C(e)&&K(e,o)}):[]):[].concat(e),a=[].concat(i,[t]),c=a[0],u=a.reduce(function(e,t){var n,r,o=G(s,t),i=f(t)?{top:(r=h(n=t)).top,right:n.offsetWidth-(n.clientWidth+r.right),bottom:n.offsetHeight-(n.clientHeight+r.bottom),left:r.left}:{top:0,right:0,bottom:0,left:0};return e.top=Math.max(o.top+i.top,e.top),e.right=Math.min(o.right-i.right,e.right),e.bottom=Math.min(o.bottom-i.bottom,e.bottom),e.left=Math.max(o.left+i.left,e.left),e},G(s,c));return u.width=u.right-u.left,u.height=u.bottom-u.top,u.x=u.left,u.y=u.top,u}function Y(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},{},e)}function J(n,e){return e.reduce(function(e,t){return e[t]=n,e},{})}function se(e,t){void 0===t&&(t={});var n=t,r=n.placement,o=void 0===r?e.placement:r,i=n.boundary,s=void 0===i?S:i,a=n.rootBoundary,c=void 0===a?T:a,u=n.elementContext,p=void 0===u?L:u,l=n.altBoundary,f=void 0!==l&&l,d=n.padding,h=void 0===d?0:d,m=Y("number"!=typeof h?h:J(h,M)),y=p===L?N:L,b=e.elements.reference,v=e.rects.popper,g=e.elements[f?y:p],E=X(C(g)?g:H(e.elements.popper),s,c),O=_(b),w=V({reference:O,element:v,strategy:"absolute",placement:o}),x=z(Object.assign({},v,{},w)),A=p===L?x:O,k={top:E.top-A.top+m.top,bottom:A.bottom-E.bottom+m.bottom,left:E.left-A.left+m.left,right:A.right-E.right+m.right},P=e.modifiersData.offset;if(p===L&&P){var j=P[o];Object.keys(k).forEach(function(e){var t=[ee,$].includes(e)?1:-1,n=[Z,$].includes(e)?"y":"x";k[e]+=j[n]*t})}return k}function ae(e,t,n){return Math.max(e,Math.min(t,n))}function ce(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function ue(t){return[Z,ee,$,te].some(function(e){return 0<=t[e]})}var pe=[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,o=r.scroll,i=void 0===o||o,s=r.resize,a=void 0===s||s,c=x(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return i&&u.forEach(function(e){e.addEventListener("scroll",n.update,F)}),a&&c.addEventListener("resize",n.update,F),function(){i&&u.forEach(function(e){e.removeEventListener("scroll",n.update,F)}),a&&c.removeEventListener("resize",n.update,F)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=V({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,o=void 0===r||r,i=n.adaptive,s=void 0===i||i,a={placement:re(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o};t.styles.popper=Object.assign({},t.styles.popper,{},u(Object.assign({},a,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s}))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,{},u(Object.assign({},a,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var o=e.state;Object.keys(o.elements).forEach(function(e){var t=o.styles[e]||{},n=o.attributes[e]||{},r=o.elements[e];f(r)&&d(r)&&(Object.assign(r.style,t),Object.entries(n).forEach(function(e){var t=e[0],n=e[1];!1===n?r.removeAttribute(t):r.setAttribute(t,!0===n?"":n)}))})},effect:function(e){var i=e.state,s={position:"absolute",left:"0",top:"0"};return Object.assign(i.elements.popper.style,s),function(){Object.keys(i.elements).forEach(function(e){var t=i.elements[e],n=Object.keys(i.styles.hasOwnProperty(e)?Object.assign({},i.styles[e]):s),r=i.attributes[e]||{},o=n.reduce(function(e,t){var n;return Object.assign({},e,((n={})[String(t)]="",n))},{});f(t)&&d(t)&&(Object.assign(t.style,o),Object.keys(r).forEach(function(e){return t.removeAttribute(e)}))})}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var p=e.state,t=e.options,n=e.name,r=t.offset,l=void 0===r?[0,0]:r,o=c.reduce(function(e,t){var n,r,o,i,s,a,c,u;return e[t]=(n=t,r=p.rects,o=l,i=re(n),s=[te,Z].includes(i)?-1:1,a="function"==typeof o?o(Object.assign({},r,{placement:n})):o,c=a[0],u=a[1],c=c||0,u=(u||0)*s,[te,ee].includes(i)?{x:u,y:c}:{x:c,y:u}),e},{}),i=o[p.placement],s=i.x,a=i.y;p.modifiersData.popperOffsets.x+=s,p.modifiersData.popperOffsets.y+=a,p.modifiersData[n]=o}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var n=e.state,t=e.options,r=e.name;if(!n.modifiersData[r]._skip){for(var o=t.fallbackPlacements,i=t.padding,s=t.boundary,a=t.rootBoundary,c=t.flipVariations,u=void 0===c||c,p=n.options.placement,l=re(p),f=o||(l===p?[q(p)]:function(e){if(re(e)===B)return[];var t=q(e);return[W(e),t,W(t)]}(p)),d=D([p].concat(f).reduce(function(e,t){return re(t)===B?e.concat(function(n,e){void 0===e&&(e={});var t=e,r=t.placement,o=t.boundary,i=t.rootBoundary,s=t.padding,a=t.flipVariations,c=oe(r),u=(c?a?I:I.filter(function(e){return e.includes(c)}):M).reduce(function(e,t){return e[t]=se(n,{placement:t,boundary:o,rootBoundary:i,padding:s})[re(t)],e},{});return Object.keys(u).sort(function(e,t){return u[e]-u[t]})}(n,{placement:t,boundary:s,rootBoundary:a,padding:i,flipVariations:u})):e.concat(t)},[]),function(e){return e}),h=n.rects.reference,m=n.rects.popper,y=new Map,b=!0,v=d[0],g=0;g<d.length;g++){var E=d[g],O=re(E),w=oe(E)===ne,x=[Z,$].includes(O),A=x?"width":"height",k=se(n,{placement:E,boundary:s,rootBoundary:a,padding:i}),P=x?w?ee:te:w?$:Z;h[A]>m[A]&&(P=q(P));var j=q(P),_=[k[O]<=0,k[P]<=0,k[j]<=0];if(_.every(function(e){return e})){v=E,b=!1;break}y.set(E,_)}if(b)for(var C=function(n){var e=d.find(function(e){var t=y.get(e);if(t)return t.slice(0,n).every(function(e){return e})});if(e)return v=e,"break"},S=u?3:1;0<S&&"break"!==C(S);S--);n.placement!==v&&(n.modifiersData[r]._skip=!0,n.placement=v,n.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,o=n.mainAxis,i=void 0===o||o,s=n.altAxis,a=void 0!==s&&s,c=n.boundary,u=n.rootBoundary,p=n.padding,l=n.tether,f=void 0===l||l,d=n.tetherOffset,h=void 0===d?0:d,m=se(t,{boundary:c,rootBoundary:u,padding:p}),y=re(t.placement),b=oe(t.placement),v=!b,g=ie(y),E="x"===g?"y":"x",O=t.modifiersData.popperOffsets,w=t.rects.reference,x=t.rects.popper,A="function"==typeof h?h(Object.assign({},t.rects,{placement:t.placement})):h,k={x:0,y:0};if(i){var P="y"===g?Z:te,j="y"===g?$:ee,_="y"===g?"height":"width",C=O[g],S=O[g]+m[P],B=O[g]-m[j],M=f?-x[_]/2:0,T=b===ne?w[_]:x[_],L=b===ne?-x[_]:-w[_],N=t.elements.arrow,I=f&&N?Q(N):{width:0,height:0},D=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},F=D[P],V=D[j],H=ae(0,Math.abs(w[_]-I[_]),I[_]),R=v?w[_]/2-M-H-F-A:T-H-F-A,q=v?-w[_]/2+M+H+V+A:L+H+V+A,U=t.modifiersData.offset?t.modifiersData.offset[t.placement][g]:0,W=t.modifiersData.popperOffsets[g]+R-U,K=t.modifiersData.popperOffsets[g]+q-U,z=ae(f?Math.min(S,W):S,C,f?Math.max(B,K):B);t.modifiersData.popperOffsets[g]=z,k[g]=z-C}if(a){var G="x"===g?Z:te,X="x"===g?$:ee,Y=O[E],J=ae(Y+m[G],Y,Y-m[X]);t.modifiersData.popperOffsets[E]=J,k[E]=J-Y}t.modifiersData[r]=k},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,o=n.elements.arrow,i=n.modifiersData.popperOffsets,s=re(n.placement),a=ie(s),c=[te,ee].includes(s)?"height":"width";if(o){var u=n.modifiersData[r+"#persistent"].padding,p=Q(o),l="y"===a?Z:te,f="y"===a?$:ee,d=(n.rects.reference[c]+n.rects.reference[a]-i[a]-n.rects.popper[c])/2-(i[a]-n.rects.reference[a])/2,h=ae(u[l],n.rects.popper[c]/2-p[c]/2+d,n.rects.popper[c]-p[c]-u[f]),m=a;n.modifiersData[r]=((t={})[m]=h,t)}},effect:function(e){var t=e.state,n=e.options,r=e.name,o=n.element,i=void 0===o?"[data-popper-arrow]":o,s=n.padding,a=void 0===s?0:s;("string"!=typeof i||(i=t.elements.popper.querySelector(i)))&&(K(t.elements.popper,i)?(t.elements.arrow=i,t.modifiersData[r+"#persistent"]={padding:Y("number"!=typeof a?a:J(a,M))}):console.error(['Popper: "arrow" modifier\'s `element` must be a child of the popper',"element."].join(" ")))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,o=t.rects.popper,i=t.modifiersData.preventOverflow,s=se(t,{elementContext:"reference"}),a=se(t,{altBoundary:!0}),c=ce(s,r),u=ce(a,o,i),p=ue(c),l=ue(u);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:u,isReferenceHidden:p,hasPopperEscaped:l},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":p,"data-popper-escaped":l})}}],le=t({defaultModifiers:pe});e.createPopper=le,e.defaultModifiers=pe,e.popperGenerator=t,Object.defineProperty(e,"__esModule",{value:!0})});var __extends=this&&this.__extends||function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();!function(u){var e=function(c){function r(){return null!==c&&c.apply(this,arguments)||this}return __extends(r,c),r.prototype.load=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=Array.isArray(e)?e:[e].concat(t),o=0,i=r;o<i.length;o++){var s=i[o],a=/^s-/.test(s.identifier);if(u._initializing&&!a)throw'Stacks-created Stimulus controller names must start with "s-".';if(!u._initializing&&a)throw'The "s-" prefix on Stimulus controller names is reserved for Stacks-created controllers.'}c.prototype.load.call(this,r)},r.start=function(e,t){var n=new r(e,t);return n.start(),n},r}(Stimulus.Application);u.application=e.start(),u._initializing=!0;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getElementData=function(e,t){return e.getAttribute("data-"+this.identifier+"-"+t)},t.prototype.setElementData=function(e,t,n){e.setAttribute("data-"+this.identifier+"-"+t,n)},t.prototype.removeElementData=function(e,t){e.removeAttribute("data-"+this.identifier+"-"+t)},t.prototype.triggerEvent=function(e,t,n){var r,o=this.identifier+":"+e;try{r=new CustomEvent(o,{bubbles:!0,cancelable:!0,detail:t})}catch(e){(r=document.createEvent("CustomEvent")).initCustomEvent(o,!0,!0,t)}return(n||this.element).dispatchEvent(r),r},t}(Stimulus.Controller);function n(e){var t,n=e.hasOwnProperty("targets")?((t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o)).targets=e.targets,t):function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(o);for(var r in e)"targets"!==r&&e.hasOwnProperty(r)&&Object.defineProperty(n.prototype,r,Object.getOwnPropertyDescriptor(e,r));return n}u.StacksController=o,u.createController=n,u.addController=function(e,t){u.application.register(e,n(t))}}(Stacks||(Stacks={}));__extends=this&&this.__extends||function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();!function(){var r="s-expandable-control:radio-off";function t(n){var e=n.target;e instanceof HTMLInputElement&&"INPUT"===e.nodeName&&"radio"===e.type&&document.querySelectorAll('input[type="radio"][name="'+e.name+'"]').forEach(function(e){if(e!==n.target){var t;try{t=new Event(r)}catch(e){(t=document.createEvent("Event")).initEvent(r,!0,!0)}e.dispatchEvent(t)}})}var n=0;function o(e){e?1===++n&&document.body.addEventListener("change",t):0===--n&&document.body.removeEventListener("change",t)}Stacks.application.register("s-expandable-control",function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initialize=function(){"INPUT"===this.element.nodeName&&0<=["radio","checkbox"].indexOf(this.element.type)?(this.isCollapsed=this._isCollapsedForCheckable,this.events=["change",r],this.isCheckable=!0,this.isRadio="radio"===this.element.type):(this.isCollapsed=this._isCollapsedForClickable,this.events=["click","keydown"]),this.listener=this.listener.bind(this)},t.prototype._isCollapsedForClickable=function(){var e=this.controlledCollapsible;return e?!e.classList.contains("is-expanded"):"false"===this.element.getAttribute("aria-expanded")},t.prototype._isCollapsedForCheckable=function(){return!this.element.checked},Object.defineProperty(t.prototype,"controlledCollapsible",{get:function(){var e=this.element.getAttribute("aria-controls");if(!e)throw"couldn't find controls";var t=document.getElementById(e);if(!t)throw"couldn't find controls";return t},enumerable:!0,configurable:!0}),t.prototype._dispatchShowHideEvent=function(e){this.triggerEvent(e?"show":"hide")},t.prototype._toggleClass=function(t){if(this.data.has("toggle-class")){var n=this.element.classList,e=this.data.get("toggle-class");if(!e)throw"couldn't find toggle class";e.split(/\s+/).forEach(function(e){n.toggle(e,!!t)})}},t.prototype.listener=function(e){var t;if(this.isCheckable)t=!this.element.checked;else{if("keydown"==e.type&&e instanceof KeyboardEvent&&13!=e.keyCode&&32!=e.keyCode)return;if(e.target!==e.currentTarget&&0<=["A","BUTTON"].indexOf(e.target.nodeName))return;t="true"===this.element.getAttribute("aria-expanded"),e.preventDefault(),"click"===e.type&&this.element.blur()}this.element.setAttribute("aria-expanded",t?"false":"true"),this.controlledCollapsible.classList.toggle("is-expanded",!t),this._dispatchShowHideEvent(!t),this._toggleClass(!t)},t.prototype.connect=function(){var t=this;if(this.events.forEach(function(e){t.element.addEventListener(e,t.listener)},this),this.isRadio&&o(!0),this.element.setAttribute("aria-expanded",this.isCollapsed()?"false":"true"),this.isCheckable){var e=this.controlledCollapsible;if(e){var n=!this.isCollapsed();n!==e.classList.contains("is-expanded")&&(e.classList.toggle("is-expanded",n),this._dispatchShowHideEvent(n),this._toggleClass(n))}}},t.prototype.disconnect=function(){var t=this;this.events.forEach(function(e){t.element.removeEventListener(e,t.listener)},this),this.isRadio&&o(!1)},t}(Stacks.StacksController))}();__extends=this&&this.__extends||function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"isVisible",{get:function(){var e=this.popoverElement;return!!e&&e.classList.contains("is-visible")},enumerable:!0,configurable:!0}),t.prototype.connect=function(){e.prototype.connect.call(this),this.validate(),this.isVisible&&this.initializePopper()},t.prototype.disconnect=function(){this.hide(),this.popper&&(this.popper.destroy(),this.popper=null),e.prototype.disconnect.call(this)},t.prototype.toggle=function(){this.isVisible?this.hide():this.show()},t.prototype.show=function(){this.isVisible||this.triggerEvent("show").defaultPrevented||(this.popper||this.initializePopper(),this.popoverElement.classList.add("is-visible"),this.popper.enableEventListeners(),this.scheduleUpdate(),this.shown())},t.prototype.hide=function(){this.isVisible&&(this.triggerEvent("hide").defaultPrevented||(this.popoverElement.classList.remove("is-visible"),this.popper&&this.popper.disableEventListeners(),this.hidden()))},t.prototype.shown=function(){this.bindDocumentEvents(),this.triggerEvent("shown")},t.prototype.hidden=function(){this.unbindDocumentEvents(),this.triggerEvent("hidden")},t.prototype.generatePopover=function(){return null},t.prototype.initializePopper=function(){this.popper=new Popper(this.referenceElement,this.popoverElement,{eventsEnabled:this.isVisible}),this.popper.options.placement=this.data.get("placement")||"bottom"},t.prototype.validate=function(){var e=this.data.get("reference-selector");if(this.referenceElement=this.element,e&&(this.referenceElement=this.element.querySelector(e),!this.referenceElement))throw"Unable to find element by reference selector: "+e;var t=this.referenceElement.getAttribute(this.popoverSelectorAttribute),n=null;if(t){if(!(n=document.getElementById(t)))throw"["+this.popoverSelectorAttribute+'="{POPOVER_ID}"] required'}else n=this.generatePopover();if(!n)throw"unable to find or generate popover element";this.popoverElement=n},t.prototype.scheduleUpdate=function(){this.popper&&this.isVisible&&this.popper.scheduleUpdate()},t}(e.StacksController),n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.popoverSelectorAttribute="aria-controls",e}return __extends(e,t),e.prototype.shown=function(){this.toggleOptionalClasses(!0),t.prototype.shown.call(this)},e.prototype.hidden=function(){this.toggleOptionalClasses(!1),t.prototype.hidden.call(this)},e.prototype.bindDocumentEvents=function(){this.boundHideOnOutsideClick=this.boundHideOnOutsideClick||this.hideOnOutsideClick.bind(this),this.boundHideOnEscapePress=this.boundHideOnEscapePress||this.hideOnEscapePress.bind(this),document.addEventListener("click",this.boundHideOnOutsideClick),document.addEventListener("keyup",this.boundHideOnEscapePress)},e.prototype.unbindDocumentEvents=function(){document.removeEventListener("click",this.boundHideOnOutsideClick),document.removeEventListener("keyup",this.boundHideOnEscapePress)},e.prototype.hideOnOutsideClick=function(e){var t=e.target;this.referenceElement.contains(t)||this.popoverElement.contains(t)||this.hide()},e.prototype.hideOnEscapePress=function(e){27===e.which&&this.isVisible&&(this.popoverElement.contains(e.target)&&this.referenceElement.focus(),this.hide())},e.prototype.toggleOptionalClasses=function(t){if(this.data.has("toggle-class")){var n=this.referenceElement.classList;this.data.get("toggle-class").split(/\s+/).forEach(function(e){n.toggle(e,t)})}},e.targets=[],e}(e.BasePopoverController=t);e.PopoverController=n}(Stacks||(Stacks={})),Stacks.application.register("s-popover",Stacks.PopoverController);__extends=this&&this.__extends||function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();!function(){var e;function f(e,t){for(var n=[],r=e.children[0],o=[],i=[];r||i.some(function(e){return 0!==e});){var s=[];n.push(s);var a=0;if(r)for(var c=0;c<r.children.length;c++){for(;i[a];)i[a]--,s[a]=o[a],a++;var u=r.children[c];if(!(u instanceof HTMLTableCellElement))throw"invalid table";if("none"!==getComputedStyle(u).display){if(u===t)return a;for(var p=a+u.colSpan;a<p;a++)i[a]=u.rowSpan-1,o[a]=u,s[a]=u}}for(;a<o.length;)i[a]&&(i[a]--,s[a]=o[a]),a++;r&&(r=r.nextElementSibling)}return t?-1:n}Stacks.application.register("s-table",((e=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setCurrentSort=function(t,r){if(["asc","desc","none"].indexOf(r)<0)throw"direction must be one of asc, desc, or none";var o=this;this.columnTargets.forEach(function(e){var n=e===t;e.classList.toggle("is-sorted",n&&"none"!==r),e.querySelectorAll(".js-sorting-indicator").forEach(function(e){var t=n?r:"none";e.classList.toggle("d-none",!e.classList.contains("js-sorting-indicator-"+t))}),n&&"none"!==r?o.setElementData(e,"sort-direction",r):o.removeElementData(e,"sort-direction")})},t.prototype.sort=function(e){var s=this,t=e.currentTarget;if(!(t instanceof HTMLTableCellElement))throw"invalid event target";var n=this.element,r=n.tBodies[0],a=function(e){if(!(e.parentElement&&e.parentElement.parentElement instanceof HTMLTableSectionElement))throw"invalid table";var t=f(e.parentElement.parentElement,e);if("number"!=typeof t)throw"shouldn't happen";return t}(t);if(!(a<0)){var c,u=function(e){var t=f(e);if(!(t instanceof Array))throw"shouldn't happen";return t}(r),o="asc"===this.getElementData(t,"sort-direction")?-1:1,i=Array.from(n.tBodies[0].rows),p=!1,l=[];i.forEach(function(e,t){var n=s.getElementData(e,"sort-to");if("top"!==n)if("bottom"!==n){var r=u[t][a];if(r){var o=s.getElementData(r,"sort-val"),i="string"==typeof o?o:r.textContent.trim();""!==i&&parseInt(i,10)+""!==i&&(p=!0),l.push([i,t])}else l.push(["",t])}else c||(c=e)}),p||l.forEach(function(e){e[0]=""===e[0]?Number.MIN_VALUE:parseInt(e[0],10)}),l.sort(function(e,t){return e[0]>t[0]?1*o:e[0]<t[0]?-1*o:e[1]>t[1]?1:-1}),l.forEach(function(e){var t=i[e[1]];t.parentElement.removeChild(t),c?r.insertBefore(t,c):r.appendChild(t)}),this.setCurrentSort(t,1===o?"asc":"desc")}},t}(Stacks.StacksController)).targets=["column"],e))}();var Stacks;__extends=this&&this.__extends||function(){var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}}();!function(r){var e=function(t){function a(){var e=null!==t&&t.apply(this,arguments)||this;return e.popoverSelectorAttribute="aria-describedby",e}return __extends(a,t),a.prototype.connect=function(){t.prototype.connect.call(this),window.matchMedia("(hover: hover)").matches&&this.bindMouseEvents()},a.prototype.disconnect=function(){this.unbindMouseEvents(),t.prototype.disconnect.call(this)},a.prototype.show=function(){var e=r.application.getControllerForElementAndIdentifier(this.element,"s-popover");e&&e.isVisible||t.prototype.show.call(this)},a.prototype.applyTitleAttributes=function(){var e,t=this.data.get("html-title");if(t)e=document.createRange().createContextualFragment(t);else{var n=this.element.getAttribute("title");if(!n)return null;e=document.createTextNode(n)}this.data.delete("html-title"),this.element.removeAttribute("title");var r=this.element.getAttribute("aria-describedby");r||(r=a.generateId(),this.element.setAttribute("aria-describedby",r));var o=document.getElementById(r);if(!o){(o=document.createElement("div")).id=r,o.className="s-popover s-popover__tooltip pe-none",o.setAttribute("aria-hidden","true"),o.setAttribute("role","tooltip");var i=this.element.parentNode;i?i.insertBefore(o,this.element.nextSibling):document.body.appendChild(o)}var s=o.querySelector(".s-popover--arrow");return o.innerHTML="",o.appendChild(e),s?o.appendChild(s):o.insertAdjacentHTML("beforeend",'<div class="s-popover--arrow"></div>'),this.scheduleUpdate(),o},a.prototype.bindDocumentEvents=function(){this.boundHideIfWithin=this.boundHideIfWithin||this.hideIfWithin.bind(this),document.addEventListener("s-popover:shown",this.boundHideIfWithin)},a.prototype.unbindDocumentEvents=function(){document.removeEventListener("s-popover:shown",this.boundHideIfWithin)},a.prototype.generatePopover=function(){return this.applyTitleAttributes()},a.prototype.hideIfWithin=function(e){e.target.contains(this.referenceElement)&&this.hide()},a.prototype.bindMouseEvents=function(){this.boundShow=this.boundShow||this.show.bind(this),this.boundHide=this.boundHide||this.hide.bind(this),this.referenceElement.addEventListener("mouseover",this.boundShow),this.referenceElement.addEventListener("mouseout",this.boundHide)},a.prototype.unbindMouseEvents=function(){this.referenceElement.removeEventListener("mouseover",this.boundShow),this.referenceElement.removeEventListener("mouseout",this.boundHide)},a.generateId=function(){return"--stacks-s-tooltip-"+Math.random().toString(36).substring(2,10)},a.targets=[],a}(r.BasePopoverController);function o(e,t){t&&t.placement&&e.setAttribute("data-s-tooltip-placement",t.placement);var n=r.application.getControllerForElementAndIdentifier(e,"s-tooltip");n?n.applyTitleAttributes():e.setAttribute("data-controller",e.getAttribute("data-controller")+" s-tooltip")}r.TooltipController=e,r.setTooltipHtml=function(e,t,n){e.setAttribute("data-s-tooltip-html-title",t),e.removeAttribute("title"),o(e,n)},r.setTooltipText=function(e,t,n){e.setAttribute("title",t),e.removeAttribute("data-s-tooltip-html-title"),o(e,n)}}(Stacks||(Stacks={})),Stacks.application.register("s-tooltip",Stacks.TooltipController),Stacks._initializing=!1;